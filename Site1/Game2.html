<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Game2</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Game2.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.4.0, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "",
		"logo": "images/ofir.jpg",
		"sameAs": [
				"https://www.instagram.com/ofirfuchs/",
				"https://api.whatsapp.com/send?phone=972586333971&text=%D7%A9%D7%9C%D7%95%D7%9D",
				"https://www.youtube.com/channel/UCZYujuHSxGkfu5Ozt5FVtQQ",
				"https://www.reddit.com/user/Adventurous_Slip4747"
		]
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Game2">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-xl-mode"><header class="u-clearfix u-grey-15 u-header u-header" id="sec-2b3a"><div class="u-clearfix u-sheet u-sheet-1">
        <a href="Terms.html" data-page-id="126161265" class="u-image u-logo u-image-1" data-image-width="143" data-image-height="152" title="Terms">
          <img src="images/ofir.jpg" class="u-logo-image u-logo-image-1">
        </a>
        <a href="tel:+972 586333971" class="u-active-none u-bottom-left-radius-0 u-bottom-right-radius-0 u-btn u-btn-rectangle u-button-style u-hover-none u-none u-radius-0 u-text-body-color u-top-left-radius-0 u-top-right-radius-0 u-btn-1"><span class="u-icon"><svg class="u-svg-content" viewBox="0 0 405.333 405.333" x="0px" y="0px" style="width: 1em; height: 1em;"><path d="M373.333,266.88c-25.003,0-49.493-3.904-72.704-11.563c-11.328-3.904-24.192-0.896-31.637,6.699l-46.016,34.752    c-52.8-28.181-86.592-61.952-114.389-114.368l33.813-44.928c8.512-8.512,11.563-20.971,7.915-32.64    C142.592,81.472,138.667,56.96,138.667,32c0-17.643-14.357-32-32-32H32C14.357,0,0,14.357,0,32    c0,205.845,167.488,373.333,373.333,373.333c17.643,0,32-14.357,32-32V298.88C405.333,281.237,390.976,266.88,373.333,266.88z"></path></svg><img></span>&nbsp;+972 58 - 6333971
        </a>
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
            <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg class="u-svg-link" viewBox="0 0 24 24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use></svg>
              <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</g></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Home.html" style="padding: 24px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="About.html" style="padding: 24px 20px;">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="login.html" style="padding: 24px 20px;">login</a><div class="u-nav-popup"><ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10 u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="recover.html">recover</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="login.html">login</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-white" href="register.html">register</a>
</li></ul>
</div>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-3"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html" style="padding: 24px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html" style="padding: 24px 20px;">About</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="login.html" style="padding: 24px 20px;">login</a><div class="u-nav-popup"><ul class="u-h-spacing-20 u-nav u-unstyled u-v-spacing-10 u-nav-4"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="recover.html">recover</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="login.html">login</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="register.html">register</a>
</li></ul>
</div>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav><span class="u-icon u-icon-2"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 50 50" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-6206"></use></svg><svg class="u-svg-content" viewBox="0 0 50 50" x="0px" y="0px" id="svg-6206" style="enable-background:new 0 0 50 50;"><path style="fill:currentColor;" d="M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543
	c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503
	c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z"></path></svg></span>
        <a href="mailto:info@site.com" class="u-active-none u-bottom-left-radius-0 u-bottom-right-radius-0 u-btn u-btn-rectangle u-button-style u-hover-none u-none u-radius-0 u-text-body-color u-top-left-radius-0 u-top-right-radius-0 u-btn-2"><span class="u-icon u-icon-3"><svg class="u-svg-content" viewBox="0 0 24 16" x="0px" y="0px" style="width: 1em; height: 1em;"><path fill="currentColor" d="M23.8,1.1l-7.3,6.8l7.3,6.8c0.1-0.2,0.2-0.6,0.2-0.9V2C24,1.7,23.9,1.4,23.8,1.1z M21.8,0H2.2
	c-0.4,0-0.7,0.1-1,0.2L10.6,9c0.8,0.8,2.2,0.8,3,0l9.2-8.7C22.6,0.1,22.2,0,21.8,0z M0.2,1.1C0.1,1.4,0,1.7,0,2V14
	c0,0.3,0.1,0.6,0.2,0.9l7.3-6.8L0.2,1.1z M15.5,9l-1.1,1c-1.3,1.2-3.6,1.2-4.9,0l-1-1l-7.3,6.8c0.2,0.1,0.6,0.2,1,0.2H22
	c0.4,0,0.6-0.1,1-0.2L15.5,9z"></path></svg><img></span>ofirfuchs@gmail.com
        </a>
        <p class="u-text u-text-default u-text-1">בבקשה תתן לי 100</p>
        <div class="u-clearfix u-custom-html u-custom-html-1"></div>
      </div></header>
    <section class="u-clearfix u-section-1" id="sec-3449">
      <div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-custom-html u-custom-html-1">
          <meta charset="utf-8">
          <style> body {
            background: #faf8ef;
            margin: 0;
            padding: 0;
        }
        canvas {
            border: 2px solid black;
            margin: 0 auto;
            display: block;
        }
        button {
            border-radius: 5px;
            font-size: 1.5em;
            display: block;
            margin: 10 auto;
        } </style>
          <canvas id="canvas" width="720" height="800"></canvas>
          <button onclick="gameManager.downBalls()">סיים תור</button>
          <script> function randomInt(...args) {
            if (args.length === 1) {
                const [n] = args;
                return Math.ceil(Math.random() * n);
            }
            if (args.length === 2) {
                const [start, end] = args;
                if (start > end) throw Error("error");
                return Math.ceil(Math.random() * (end - start)) + start;
            }
        }
        function random(...args) {
            if (args.length === 1) {
                const [n] = args;
                return Math.random() * n;
            }
            if (args.length === 2) {
                const [start, end] = args;
                if (start > end) throw Error("error");
                return Math.random() * (end - start) + start;
            }
        }
        const range = function (n, m) {
            if (arguments.length === 1)
                return Array.from({ length: n }).map((_, i) => i);
            if (arguments.length === 2) {
                if (n === m) return [n];
                else if (n < m) {
                    return Array.from({ length: m - n + 1 }).map((_, i) => i + n);
                } else {
                    return Array.from({ length: n - m + 1 }).map(
                        (_, i) => m - i + (n - m)
                    );
                }
            }
        };
        function normalize(n) {
            return n < 0 ? -1 : n > 0 ? 1 : 0;
        }
        function clamp(v, min, max) {
            return Math.max(min, Math.min(max, v));
        }
        function between(v, min, max) {
            return min <= v && v <= max;
        }
        const delay = (n) => new Promise((r) => setTimeout(r, n)); </script>
          <script> /**
         * Vector Library
         **/
        class Vector {
            constructor(x = 0, y = 0) {
                this.x = x;
                this.y = y;
            }
            add(v) {
                this.x += v.x;
                this.y += v.y;
            }
            sub(v) {
                this.x -= v.x;
                this.y -= v.y;
            }
            mult(n) {
                this.x *= n;
                this.y *= n;
            }
            mag() {
                return Math.sqrt(this.x * this.x + this.y + this.y);
            }
            get() {
                return new Vector(this.x, this.y);
            }
            normalize() {
                this.x = normalize(this.x);
                this.y = normalize(this.y);
            }
            copy() {
                return new Vector(this.x, this.y);
            }
        }
        Vector.mult = (v, n) => new Vector(v.x * n, v.y * n);
        Vector.div = (v, n) => new Vector(v.x / n, v.y / n); </script>
          <script> /**
         *   Canvas Library
         **/
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        const width = 710;
        const height = 880;
        const uiOffsetY = 80;
        canvas.width = width;
        canvas.height = height;
        function line(x1, y1, x2, y2, color = "#000") {
            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
        }
        function dashLine(x1, y1, x2, y2) {
            ctx.beginPath();
            ctx.setLineDash([5, 15]);
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        function rect(x, y, w, h) {
            ctx.beginPath();
            ctx.rect(x, y, w, h);
            ctx.strokeStyle = "#000";
            ctx.stroke();
            ctx.closePath();
        }
        function fillRect(x, y, w, h, color = "#171717") {
            ctx.save();
            ctx.beginPath();
            ctx.fillStyle = color;
            ctx.fillRect(x, y, w, h);
            ctx.stroke();
            ctx.closePath();
            ctx.restore();
        }
        function circle(x, y, r, color = "#000") {
            ctx.save();
            ctx.beginPath();
            ctx.arc(x, y, r, 0, Math.PI * 2);
            ctx.lineWidth = 3;
            ctx.fillStyle = color;
            ctx.strokeStyle = color;
            ctx.fill();
            ctx.stroke();
            ctx.closePath();
            ctx.restore();
        }
        function clear() {
            ctx.clearRect(0, 0, width, height);
        }
        function shuffle(arr) {
            return arr.sort(() => Math.random() - 0.5);
        } </script>
          <script> /**
         *   User Code
         **/
        const POWER = 0.3;
        const Mouse = { position: new Vector(0, 0) };
        class BallLine {
            constructor() { }
            display(state) {
                if (!state.ballMoving && !state.brickMoving && state.ballPos) {
                    dashLine(
                        state.ballPos.x,
                        state.ballPos.y,
                        Mouse.position.x,
                        Math.min(Mouse.position.y, 720)
                    );
                }
            }
        }
        class Ball {
            constructor(mass, x, y) {
                this.position = new Vector(x, y);
                this.velocity = new Vector(0, 0);
                this.acceleration = new Vector(0, 0);
                this.mass = mass;
                this.r = this.mass * 8;
                this.showDirection = true;
            }
            setOnStop(f) {
                this.onStop = f;
            }
            applyForce(force) {
                const f = Vector.div(force, this.mass);
                this.acceleration.add(f);
            }
            update() {
                this.velocity.add(this.acceleration);
                this.position.add(this.velocity);
                this.acceleration.mult(0);
            }
            move(direction) {
                if (direction === "right") this.applyForce(new Vector(20, 0));
                else if (direction === "left") this.applyForce(new Vector(-20, 0));
            }
            stop() {
                this.velocity = new Vector(0, 0);
                this.showDirection = true;
                this.onStop(this);
                this.downing = false;
            }
            down() {
                this.downing = true;
                this.velocity = new Vector(0, 30);
            }
            shoot(mousePos) {
                this.showDirection = false;
                const force = this.calcBallVelocity(this.angle(mousePos));
                this.applyForce(force);
            }
            calcBallVelocity(angle) {
                return new Vector(
                    100 * Math.cos(angle) * POWER,
                    100 * Math.sin(angle) * POWER
                );
            }
            angle(mousePos) {
                const opposite = mousePos.y - this.position.y;
                const adjacent = mousePos.x - this.position.x;
                const angle = Math.atan2(opposite, adjacent);
                return angle;
            }
            display() {
                circle(this.position.x, this.position.y, this.r, "#5ba7f4");
            }
            collideWith(brick) {
                if (this.downing) return false;
                const { x, y } = this.position;
                const r = this.r;
                const closestX = clamp(x, brick.x, brick.x + brick.w);
                const closestY = clamp(y, brick.y, brick.y + brick.h);
                const distanceX = x - closestX;
                const distanceY = y - closestY;
                const distanceSquared = distanceX * distanceX + distanceY * distanceY;
                const collided = distanceSquared < r * r;
                if (!collided) return false;
                if (
                    closestY === brick.y &&
                    between(closestX, brick.x - r + 3, brick.x + brick.w + r - 3)
                ) {
                    this.velocity.y *= -1;
                    this.position.y = closestY - r;
                } else if (
                    closestY === brick.y + brick.h &&
                    between(closestX, brick.x - r + 3, brick.x + brick.w + r - 3)
                ) {
                    this.velocity.y *= -1;
                    this.position.y = closestY + r;
                } else if (
                    closestX === brick.x &&
                    between(closestY, brick.y - r + 3, brick.y + brick.h + r - 3)
                ) {
                    this.velocity.x *= -1;
                    this.position.x = closestX - r;
                } else if (
                    closestX === brick.x + brick.w &&
                    between(closestY, brick.y - r + 3, brick.y + brick.h + r - 3)
                ) {
                    this.velocity.x *= -1;
                    this.position.x = closestX + r;
                }
                return true;
            }
            collideWithBonusBall(bonusBall) {
                if (this.downing) return false;
                const x = this.position.x - bonusBall.x;
                const y = this.position.y - bonusBall.y;
                const r = this.r;
                const collided = 2 * r >= Math.sqrt(x * x + y * y);
                return collided;
            }
            checkEdges() {
                if (this.position.x > width) {
                    this.position.x = width;
                    this.velocity.x *= -1;
                } else if (this.position.x < 0) {
                    this.position.x = 0;
                    this.velocity.x *= -1;
                }
                if (this.position.y > height - 100) {
                    this.velocity.y *= -1;
                    this.position.y = height - 100;
                    this.stop();
                } else if (this.position.y < 100) {
                    this.velocity.y *= -1;
                    this.position.y = 100;
                }
            }
        }
        class Brick {
            constructor(n, x, y) {
                this.n = n;
                this.start = n;
                this.x = x * 120;
                this.y = y * 80 + uiOffsetY;
                this.w = 110;
                this.h = 70;
            }
            shouldMoveDown(state) {
                return this.y < 80 * (state.level - this.start + 1) + uiOffsetY;
            }
            update(state) {
                if (this.shouldMoveDown(state)) {
                    this.y = Math.min(
                        this.y + 10,
                        80 * (state.level - this.start + 1) + uiOffsetY
                    );
                }
            }
            color(level) {
                const percentage = ((level - this.n) / level) * 30;
                return `hsl(${percentage}, ${100 - percentage}%, 63%)`;
            }
            display(state) {
                fillRect(this.x, this.y, this.w, this.h, this.color(state.level));
                ctx.fillStyle = "black";
                ctx.font = "20px Arial";
                ctx.fillText(
                    this.n,
                    this.x + this.w / 2 - 8,
                    this.y + this.h / 2 + 5
                );
            }
            hit() {
                this.n--;
            }
            get broken() {
                return this.n <= 0;
            }
            get hitBottom() {
                return this.y >= height - uiOffsetY - 80;
            }
        }
        class BrickParticle {
            constructor(n, x, y) {
                const i = n % 5;
                const j = ~~(n / 4);
                this.w = 22;
                this.h = 18;
                this.location = new Vector(x + i * this.w, y + j * this.h);
                this.acceleration = new Vector(0, 0);
                this.velocity = new Vector(
                    i > 2
                        ? random(0, 0.5)
                        : i === 2
                            ? random(-0.5, 0.5)
                            : random(-0.5, 0),
                    random(1, 3)
                );
                this.lifespan = 255;
            }
            update() {
                this.velocity.add(this.acceleration);
                this.location.add(this.velocity);
                this.lifespan -= 4;
            }
            display() {
                fillRect(
                    this.location.x,
                    this.location.y,
                    22,
                    18,
                    `hsla(30, 70%, 63%, ${this.lifespan / 255})`
                );
            }
            run() {
                this.update();
                this.display();
            }
            get isDead() {
                return this.lifespan < 0;
            }
        }
        class BrickParticleSystem {
            constructor(x, y) {
                this.origin = new Vector(x, y);
                this.particles = range(20).map((n) => new BrickParticle(n, x, y));
            }
            addParticle() {
                this.particles.push(new BrickParticle(this.origin));
            }
            run() {
                this.particles.forEach((particle) => particle.run());
            }
            get isDead() {
                return !this.particles.length || this.particles[0].isDead;
            }
        }
        class BrickParticleSystems {
            constructor() {
                this.particleSystems = [];
            }
            addParticleSystem(...bricks) {
                const newPs = bricks.map(({ x, y }) => new BrickParticleSystem(x, y));
                this.particleSystems.push(...newPs);
            }
            run() {
                this.particleSystems = this.particleSystems.filter(
                    (ps) => !ps.isDead
                );
                this.particleSystems.forEach((ps) => ps.run());
            }
        }
        class BonusBall {
            constructor(n, x, y) {
                this.start = n;
                this.r = 16;
                this.x = x * 120 + 56;
                this.y = y * 80 + 36 + uiOffsetY;
                this.hit = false;
                //         this.effectR = 18;
                //         this.effectD = 0.1;
            }
            moveDownLittle(state) {
                this.y = Math.min(
                    this.y + 10,
                    80 * (state.level - this.start + 1) + uiOffsetY + 40
                );
            }
            update(state) {
                if (this.hit) this.y = Math.min(this.y + 50, height - 100);
                else this.moveDownLittle(state);
                if (this.hit && this.y === height - 100 && state.brickMoving) {
                    if (this.x < state.ballPos.x) {
                        this.x = Math.min(this.x + 30, state.ballPos.x);
                    } else {
                        this.x = Math.max(this.x - 30, state.ballPos.x);
                    }
                }
                //         this.effectR += this.effectD;
                //         if (this.effectR > 28) this.effectR = 18;
            }
            display() {
                circle(this.x, this.y, this.r, "#3dd462");
                //         if (!this.hit)
                //             circle(this.x, this.y, this.effectR);
            }
            hitWithBall() {
                this.hit = true;
            }
            collideWith(ball) {
                const x = ball.position.x - this.x;
                const y = ball.position.y - this.y;
                const r = this.r;
                const collided = 2 * r >= Math.sqrt(x * x + y * y);
                if (collided) {
                    this.hit = true;
                }
                return collided;
            }
        }
        class UI {
            constructor() { }
            display(state) {
                line(0, uiOffsetY, width, uiOffsetY);
                line(0, height - uiOffsetY, width, height - uiOffsetY);
                this.showBallCount(state);
                this.showScore(state);
            }
            showScore(state) {
                ctx.fillText(`שלב נוכחי: ${state.level}`, 30, uiOffsetY / 2 + 7);
                ctx.fillText(
                    `השיא: ${state.bestLevel}`,
                    width - 150,
                    uiOffsetY / 2 + 7
                );
            }
            showBallCount(state) {
                if (!state.ballMoving)
                    ctx.fillText(
                        `x${state.ballCount}`,
                        state.ballPos.x - 10,
                        height - 55
                    );
            }
            gameOver() {
                fillRect(0, height / 2 - 100, width, 200, "rgba(0, 0, 0, 0.3)");
                ctx.font = "40px Arial";
                ctx.fillText("הפסדת!", width / 2 - 40, height / 2 + 12);
                ctx.font = "20px Arial";
            }
        }
        class Balls {
            constructor(state) {
                this.balls = range(state.ballCount).map(
                    (i) => new Ball(2, state.ballPos.x, state.ballPos.y)
                );
                this.onBallStop = (ball) => {
                    if (!state.firstBallStop) {
                        state.ballPos = ball.position.copy();
                        state.firstBallStop = true;
                    }
                    ball.position.x = state.ballPos.x;
                };
                this.balls.forEach((ball) => ball.setOnStop(this.onBallStop));
            }
            collideWithBricks(bricks) {
                bricks.bricks.forEach((brick) => {
                    this.balls.forEach((ball) => {
                        const collided = ball.collideWith(brick);
                        if (collided) {
                            brick.hit();
                        }
                    });
                });
            }
            collideWithBonusBall(bonusBalls) {
                this.balls.forEach((ball) => {
                    bonusBalls.forEach((bonusBall) => {
                        const collided = ball.collideWithBonusBall(bonusBall);
                        if (collided) bonusBall.hitWithBall();
                    });
                });
            }
            get allStopped() {
                return this.balls.every((ball) => ball.velocity.mag() === 0);
            }
            addBalls(state, n) {
                const newBalls = range(n).map(
                    (i) => new Ball(2, state.ballPos.x, state.ballPos.y)
                );
                newBalls.forEach((ball) => ball.setOnStop(this.onBallStop));
                this.balls.push(...newBalls);
            }
            async shoot(mousePos, state) {
                for (const ball of this.balls) {
                    if (state.ballDowning) return;
                    ball.shoot(mousePos);
                    await delay(Math.max(50 - ~~(state.ballCount / 10), 10));
                }
            }
            display() {
                this.balls.forEach((ball) => {
                    ball.update();
                    ball.checkEdges();
                    ball.display();
                });
            }
            down() {
                this.balls.forEach((ball) => ball.down());
            }
        }
        class Bricks {
            constructor() {
                this.bricks = [];
                this.particleSystems = new BrickParticleSystems();
            }
            addBricks(state, newBrickIndeces) {
                const newBricks = newBrickIndeces.map(
                    (i) => new Brick(state.level, i, 0)
                );
                this.bricks.push(...newBricks);
            }
            display(state) {
                this.bricks.forEach((brick) => {
                    brick.update(state);
                    brick.display(state);
                });
                this.particleSystems.run();
            }
            break() {
                const brokenBricks = this.bricks.filter((brick) => brick.broken);
                this.particleSystems.addParticleSystem(...brokenBricks);
                this.bricks = this.bricks.filter((brick) => !brick.broken);
            }
            shouldSlideDown(state) {
                return this.bricks[0] && this.bricks[0].shouldMoveDown(state);
            }
            get hitBottom() {
                return this.bricks[0] && this.bricks[0].hitBottom;
            }
        }
        class BonusBalls {
            constructor() {
                this.bonusBalls = [];
            }
            addBonusBalls(state, newBonusBallIndex) {
                this.bonusBalls = [
                    ...this.bonusBalls,
                    new BonusBall(state.level, newBonusBallIndex, 0),
                ];
            }
            display(state) {
                this.bonusBalls.forEach((bonusBall) => {
                    bonusBall.update(state);
                    bonusBall.display();
                });
            }
            collideWithBall(balls) {
                this.bonusBalls.forEach((bonusBall) =>
                    balls.balls.forEach((ball) => bonusBall.collideWith(ball))
                );
            }
            removeHitBalls() {
                this.bonusBalls = this.bonusBalls.filter(
                    (b) => !b.hit || b.y > height
                );
            }
            get hitBallCount() {
                return this.bonusBalls.filter((ball) => ball.hit).length;
            }
        }
        class LocalStorageManager {
            constructor() {
                this.bestScoreKey = "brickBestScore";
                this.storage = window.localStorage;
            }
            getBestScore() {
                return this.storage.getItem(this.bestScoreKey) || 1;
            }
            setBestScore(score) {
                this.storage.setItem(this.bestScoreKey, score);
            }
            setScore(score) {
                this.setBestScore(Math.max(score, this.getBestScore()));
            }
        }
        class GameManager {
            constructor() {
                this.state = {
                    ballPos: new Vector(width / 2, height - 100),
                    ballMoving: false,
                    ballCount: 1,
                    ballDowning: false,
                    brickMoving: false,
                    firstBallStop: true,
                    level: 1,
                    over: false,
                };
                this.balls = new Balls(this.state);
                this.bricks = new Bricks();
                this.bonusBalls = new BonusBalls();
                this.ballLine = new BallLine();
                this.ui = new UI();
                this.scoreStorage = new LocalStorageManager();
                this.state.bestLevel = this.scoreStorage.getBestScore();
                this.addBallsAndBricks();
                canvas.addEventListener("click", (e) => this.shootBalls(e));
            }
            addBallsAndBricks() {
                const bonusBallCount = this.bonusBalls.hitBallCount;
                const newBrickIndeces = shuffle(range(6)).slice(
                    0,
                    Math.random() > 0.9 ? randomInt(5) : randomInt(4)
                );
                const newBonusBallIndex = shuffle(
                    range(6).filter((i) => !newBrickIndeces.includes(i))
                )[0];
                this.state.ballCount += bonusBallCount;
                this.balls.addBalls(this.state, bonusBallCount);
                this.bricks.addBricks(this.state, newBrickIndeces);
                this.bonusBalls.addBonusBalls(this.state, newBonusBallIndex);
            }
            shootBalls(e) {
                if (
                    this.state.ballMoving ||
                    this.state.brickMoving ||
                    this.state.over
                )
                    return;
                this.state.ballPos = null;
                this.state.ballMoving = true;
                this.state.ballDowning = false;
                this.state.firstBallStop = false;
                const { x, y } = Mouse.position;
                this.balls.shoot({ x, y: Math.min(y, 720) }, this.state);
            }
            checkCollision() {
                this.balls.collideWithBricks(this.bricks);
                this.bonusBalls.collideWithBall(this.balls);
                this.bricks.break();
            }
            draw() {
                clear();
                this.ballLine.display(this.state);
                this.balls.display();
                this.bricks.display(this.state);
                this.bonusBalls.display(this.state);
                this.ui.display(this.state);
            }
            run() {
                this.draw();
                this.checkCollision();
                if (this.state.ballMoving && this.balls.allStopped) {
                    this.state.ballMoving = false;
                    this.state.brickMoving = true;
                    this.state.level += 1;
                    this.scoreStorage.setScore(this.state.level);
                    this.state.bestLevel = this.scoreStorage.getBestScore();
                    this.addBallsAndBricks();
                }
                if (this.state.brickMoving) {
                    if (!this.bricks.shouldSlideDown(this.state)) {
                        this.state.brickMoving = false;
                        this.bonusBalls.removeHitBalls();
                    }
                }
                if (this.bricks.hitBottom) {
                    this.ui.gameOver();
                    this.state.over = true;
                }
                window.requestAnimationFrame(() => this.run());
            }
            downBalls() {
                this.state.ballDowning = true;
                this.balls.down();
            }
        }
        canvas.addEventListener("mousemove", (e) => {
            const scale = ctx.scale;
            const offset = ctx.offset;
            const mx = e.pageX - canvas.offsetLeft;
            const my = e.pageY;
            Mouse.position = new Vector(mx, my);
        });
        const gameManager = new GameManager();
        gameManager.run(); </script>
        </div>
      </div>
    </section>
    
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-8f44"><p class="u-text u-text-1">&nbsp; <span class="u-icon" data-href="https://www.youtube.com/watch?v=xvFZjo5PgG0" data-target="_blank"><svg class="u-svg-content" viewBox="0 0 54.757 54.757" x="0px" y="0px" style="width: 1em; height: 1em;"><path d="M40.94,5.617C37.318,1.995,32.502,0,27.38,0c-5.123,0-9.938,1.995-13.56,5.617c-6.703,6.702-7.536,19.312-1.804,26.952
	L27.38,54.757L42.721,32.6C48.476,24.929,47.643,12.319,40.94,5.617z M27.557,26c-3.859,0-7-3.141-7-7s3.141-7,7-7s7,3.141,7,7
	S31.416,26,27.557,26z"></path></svg><img></span>&nbsp;הבית שלי אם מישהו רוצה לריב מכות
      </p><p class="u-small-text u-text u-text-variant u-text-2">כל הזכויות שמורות לאופיר<br>כל מי שיעתיק יקבל 0 עגול
      </p><div class="u-image u-image-circle u-preserve-proportions u-image-1" alt=""></div><!--shopping_cart--><a class="u-shopping-cart u-shopping-cart-1" href="#"><span class="u-icon u-shopping-cart-icon u-text-palette-1-base"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 16 16" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-81f6"></use></svg><svg class="u-svg-content" viewBox="0 0 16 16" x="0px" y="0px" id="svg-81f6"><path d="M14.5,3l-2.1,5H6.1L5.9,7.6L4,3H14.5 M0,0v1h2.1L5,8l-2,4h11v-1H4.6l1-2H13l3-7H3.6L2.8,0H0z M12.5,13
	c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5S13.3,13,12.5,13L12.5,13z M4.5,13C3.7,13,3,13.7,3,14.5S3.7,16,4.5,16
	S6,15.3,6,14.5S5.3,13,4.5,13L4.5,13z"></path></svg>
        <span class="u-icon-circle u-palette-1-base u-shopping-cart-count" style="font-size: 0.75rem;"><!--shopping_cart_count-->2<!--/shopping_cart_count--></span>
    </span>
      </a><!--/shopping_cart--><div class="u-social-icons u-spacing-10 u-social-icons-1">
        <a class="u-social-url" title="instagram" target="_blank" href="https://www.instagram.com/ofirfuchs/"><span class="u-icon u-social-icon u-social-instagram u-icon-3"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112 112" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-cddb"></use></svg><svg class="u-svg-content" viewBox="0 0 112 112" x="0" y="0" id="svg-cddb"><circle fill="currentColor" cx="56.1" cy="56.1" r="55"></circle><path fill="#FFFFFF" d="M55.9,38.2c-9.9,0-17.9,8-17.9,17.9C38,66,46,74,55.9,74c9.9,0,17.9-8,17.9-17.9C73.8,46.2,65.8,38.2,55.9,38.2
z M55.9,66.4c-5.7,0-10.3-4.6-10.3-10.3c-0.1-5.7,4.6-10.3,10.3-10.3c5.7,0,10.3,4.6,10.3,10.3C66.2,61.8,61.6,66.4,55.9,66.4z"></path><path fill="#FFFFFF" d="M74.3,33.5c-2.3,0-4.2,1.9-4.2,4.2s1.9,4.2,4.2,4.2s4.2-1.9,4.2-4.2S76.6,33.5,74.3,33.5z"></path><path fill="#FFFFFF" d="M73.1,21.3H38.6c-9.7,0-17.5,7.9-17.5,17.5v34.5c0,9.7,7.9,17.6,17.5,17.6h34.5c9.7,0,17.5-7.9,17.5-17.5V38.8
C90.6,29.1,82.7,21.3,73.1,21.3z M83,73.3c0,5.5-4.5,9.9-9.9,9.9H38.6c-5.5,0-9.9-4.5-9.9-9.9V38.8c0-5.5,4.5-9.9,9.9-9.9h34.5
c5.5,0,9.9,4.5,9.9,9.9V73.3z"></path></svg></span>
        </a>
        <a class="u-social-url" target="_blank" data-type="Whatsapp" title="Whatsapp" href="https://api.whatsapp.com/send?phone=972586333971&amp;text=%D7%A9%D7%9C%D7%95%D7%9D"><span class="u-icon u-social-icon u-social-whatsapp u-icon-4"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112 112" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-9e79"></use></svg><svg class="u-svg-content" viewBox="0 0 112 112" x="0" y="0" id="svg-9e79"><circle fill="currentColor" cx="56.1" cy="56.1" r="55"></circle><path fill="#FFFFFF" d="M83.8,28.3C77.2,21.7,68.4,18,59,18c-19.3,0-35.1,15.7-35.1,35.1c0,6.2,1.6,12.2,4.7,17.5l-5,18.2L42.2,84
	c5.1,2.8,10.9,4.3,16.8,4.3h0l0,0c19.3,0,35.1-15.7,35.1-35.1C94.1,43.8,90.5,35,83.8,28.3 M59,82.3L59,82.3
	c-5.2,0-10.4-1.4-14.9-4.1l-1.1-0.6l-11,2.9L35,69.8l-0.7-1.1c-2.9-4.6-4.5-10-4.5-15.5C29.8,37,42.9,24,59,24
	c7.8,0,15.1,3,20.6,8.6c5.5,5.5,8.5,12.8,8.5,20.6C88.2,69.2,75.1,82.3,59,82.3 M75,60.5c-0.9-0.4-5.2-2.6-6-2.9
	c-0.8-0.3-1.4-0.4-2,0.4s-2.3,2.9-2.8,3.4c-0.5,0.6-1,0.7-1.9,0.2c-0.9-0.4-3.7-1.4-7.1-4.4c-2.6-2.3-4.4-5.2-4.9-6.1
	c-0.5-0.9-0.1-1.4,0.4-1.8c0.4-0.4,0.9-1,1.3-1.5c0.4-0.5,0.6-0.9,0.9-1.5c0.3-0.6,0.1-1.1-0.1-1.5c-0.2-0.4-2-4.8-2.7-6.5
	c-0.7-1.7-1.4-1.5-2-1.5c-0.5,0-1.1,0-1.7,0c-0.6,0-1.5,0.2-2.3,1.1c-0.8,0.9-3.1,3-3.1,7.3c0,4.3,3.1,8.5,3.6,9.1
	c0.4,0.6,6.2,9.4,15,13.2c2.1,0.9,3.7,1.4,5,1.8c2.1,0.7,4,0.6,5.5,0.3c1.7-0.3,5.2-2.1,5.9-4.2c0.7-2,0.7-3.8,0.5-4.2
	C76.5,61.1,75.9,60.9,75,60.5"></path></svg></span>
        </a>
        <a class="u-social-url" target="_blank" data-type="YouTube" title="YouTube" href="https://www.youtube.com/channel/UCZYujuHSxGkfu5Ozt5FVtQQ"><span class="u-icon u-social-icon u-social-youtube u-icon-5"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112 112" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-901f"></use></svg><svg class="u-svg-content" viewBox="0 0 112 112" x="0" y="0" id="svg-901f"><circle fill="currentColor" cx="56.1" cy="56.1" r="55"></circle><path fill="#FFFFFF" d="M74.9,33.3H37.3c-7.4,0-13.4,6-13.4,13.4v18.8c0,7.4,6,13.4,13.4,13.4h37.6c7.4,0,13.4-6,13.4-13.4V46.7 C88.3,39.3,82.3,33.3,74.9,33.3L74.9,33.3z M65.9,57l-17.6,8.4c-0.5,0.2-1-0.1-1-0.6V47.5c0-0.5,0.6-0.9,1-0.6l17.6,8.9 C66.4,56,66.4,56.8,65.9,57L65.9,57z"></path></svg></span>
        </a>
        <a class="u-social-url" target="_blank" data-type="Reddit" title="Reddit" href="https://www.reddit.com/user/Adventurous_Slip4747"><span class="u-icon u-social-icon u-social-reddit u-icon-6"><svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 112 112" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-06f3"></use></svg><svg class="u-svg-content" viewBox="0 0 112 112" x="0" y="0" id="svg-06f3"><circle fill="currentColor" cx="56.1" cy="56.1" r="55"></circle><path id="Fill-3" fill="#FFFFFF" d="M69.6,66.6c-3.4,0-6.1-2.8-6.1-6.1c0-3.4,2.8-6.1,6.1-6.1c3.4,0,6.1,2.8,6.1,6.1
	C75.8,63.8,73,66.6,69.6,66.6 M70.7,76.7c-4.2,4.2-12.2,4.5-14.6,4.5c-2.4,0-10.4-0.3-14.6-4.5c-0.6-0.6-0.6-1.6,0-2.3
	s1.6-0.6,2.3,0C46.4,77.1,52,78,56.1,78c4,0,9.7-0.9,12.3-3.6c0.6-0.6,1.6-0.6,2.3,0C71.3,75,71.3,76,70.7,76.7 M36.4,60.4
	c0-3.4,2.8-6.1,6.1-6.1c3.4,0,6.1,2.8,6.1,6.1s-2.8,6.1-6.1,6.1C39.2,66.6,36.4,63.8,36.4,60.4 M95.4,54.3c0-4.8-3.8-8.6-8.6-8.6
	c-2.3,0-4.4,0.9-6,2.4c-5.9-4.2-14-7-23-7.3l3.9-18.4l12.8,2.7c0.2,3.3,2.8,5.9,6.1,5.9c3.4,0,6.1-2.8,6.1-6.1s-2.8-6.1-6.1-6.1
	c-2.4,0-4.5,1.4-5.5,3.4l-14.3-3c-0.4-0.1-0.8,0-1.2,0.2c-0.3,0.2-0.6,0.6-0.7,1l-4.3,20.2c0,0.1,0,0.2,0,0.3
	c-9.2,0.2-17.5,3-23.4,7.3c-1.5-1.5-3.6-2.4-5.9-2.4c-4.8,0-8.6,3.9-8.6,8.6c0,3.5,2.1,6.5,5.1,7.8c-0.1,0.8-0.2,1.7-0.2,2.6
	c0,13.2,15.4,24,34.4,24s34.4-10.7,34.4-24c0-0.9-0.1-1.7-0.2-2.6C93.3,60.8,95.4,57.8,95.4,54.3"></path></svg></span>
        </a>
      </div></footer>
    <section class="u-backlink u-clearfix u-grey-80">
      <a class="u-link" href="https://nicepage.com/website-templates" target="_blank">
        <span>Website Templates</span>
      </a>
      <p class="u-text">
        <span>created with</span>
      </p>
      <a class="u-link" href="" target="_blank">
        <span>Website Builder Software</span>
      </a>. 
    </section>
  </body>
</html>